"use strict";jQuery(document).ready(function(i){rrze_pieksy_admin.dateformat;var t=rrze_pieksy_admin.text_cancel,n=rrze_pieksy_admin.text_cancelled,r=rrze_pieksy_admin.text_confirmed,a=rrze_pieksy_admin.ajaxurl;function o(i,t){var e=t.attr("data-id"),o=t.attr("href");jQuery.ajax({type:"POST",url:a,data:{action:"booking_action",id:e,type:i}}).fail(function(e){console.error("AJAX request failed")}).done(function(e){e=JSON.parse(e),jQuery.ajax({type:"GET",url:o}).fail(function(e){console.error("AJAX request failed")}).done(function(e){"confirm"==i?t.addClass("rrze-pieksy-confirmed").attr("disabled","disabled").html(r):t.attr("disabled","disabled").html(n)})})}i(".rrze-pieksy-confirm").click(function(e){return e.preventDefault(),o("confirm",jQuery(this)),!1}),i(".rrze-pieksy-cancel").click(function(e){return e.preventDefault(),confirm(t)&&o("cancel",jQuery(this)),!1});var e=new URLSearchParams(window.location.search);e.get("s")&&i(".subtitle").html(i(".subtitle").text().substring(0,i(".subtitle").text().length-1)+e.get("s")+"&rdquo;"),i("select#rrze-pieksy-room-bookingmode").after('<a><span class="dashicons dashicons-editor-help info-bookingmode" title="Informationen zum Buchungsmodus anzeigen" aria-hidden="true"></span><span class="screen-reader-text">Informationen zum Buchungsmodus anzeigen</span></a>'),i(".cmb2-id-rrze-pieksy-room-bookingmode .cmb2-metabox-description").hide(),i(".cmb2-id-rrze-pieksy-room-bookingmode").find(".info-bookingmode").click(function(){i(".cmb2-id-rrze-pieksy-room-bookingmode .cmb2-metabox-description").slideToggle()});var s=i("body.wp-admin.post-type-room #rrze-pieksy-room-timeslots_repeat div.cmb-repeatable-grouping");i(s).each(function(e){1==i(this).find("input[id$='rrze-pieksy-room-starttime']").prop("disabled")&&i(this).find("button.cmb-remove-group-row").prop({disabled:!0})}),i("body.wp-admin.post-type-room form, body.wp-admin.post-type-booking form").submit(function(e){i("#postbox-container-2 :disabled").each(function(e){i(this).removeAttr("disabled")})});var c=jQuery("div#rrze-pieksy-booking-details"),d=c.find("select#rrze-pieksy-booking-seat"),l=c.find("input#rrze-pieksy-booking-start_date"),p=c.find("input#rrze-pieksy-booking-start_time"),m=c.find("input#rrze-pieksy-booking-end_date"),u=c.find("input#rrze-pieksy-booking-end_time");p.attr("disabled","disabled"),d.change(function(){l.val(""),p.val(""),m.val(""),u.val(""),jQuery("div.select_timeslot_container").remove()}),l.change(function(){m.val(l.val()),p.val(""),u.val(""),""==d.val()||""==l.val()?(alert(rrze_pieksy_admin.alert_no_seat_date),l.val(""),m.val("")):(jQuery("div.select_timeslot_container").remove(),jQuery.post(a,{action:"ShowTimeslots",seat:d.val(),date:l.val()},function(e){0!=e&&jQuery("input#rrze-pieksy-booking-start_time").after(e)}))}),i("div.cmb2-id-rrze-pieksy-booking-start").on("change","select.select_timeslot",function(){var e=jQuery(this).val(),i=jQuery(this).find(":selected").data("end");p.val(e),u.val(i)});var k=i("select#rrze-pieksy-room-bookingmode"),b=k.val(),y=i("div.cmb2-id-rrze-pieksy-room-instant-check-in"),e=i("input#rrze-pieksy-room-auto-confirmation"),s=e.is(":checked"),c=i("input#rrze-pieksy-room-force-to-checkin");c.is(":checked");function f(e){i("div#cmb2-metabox-rrze_pieksy_general-meta div.cmb-row.hide-"+e).slideUp(),i("div#cmb2-metabox-rrze_pieksy_general-meta div.cmb-row").not(".hide-"+e).slideDown(),i("div#cmb2-metabox-rrze_pieksy_general-meta div.cmb-row.hide-"+e+" input").prop("checked",!1),"check-only"===e&&(i("input#rrze-pieksy-room-instant-check-in").prop("checked",!0),i("input#rrze-pieksy-room-auto-confirmation").prop("checked",!0))}function h(e){!0===e?"reservation"!==(e=i("option:selected",k).val())&&"check-only"!==e||y.slideDown():(y.slideUp(),i("#rrze-pieksy-room-instant-check-in").prop("checked",!1))}f(b),h(s),k.on("change",function(){f(i("option:selected",this).val())}),e.click(function(){h(i(this).is(":checked"))}),c.click(function(){i(this).is(":checked")}),i("body.post-type-booking table.wp-list-table").bind("cut copy paste",function(e){e.preventDefault()}),i("body.post-type-booking table.wp-list-table").on("contextmenu",function(e){return!1})});