"use strict";jQuery(document).ready(function(o){rrze_rsvp_admin.dateformat;var r=rrze_rsvp_admin.text_cancel,t=rrze_rsvp_admin.text_cancelled,n=rrze_rsvp_admin.text_confirmed,a=rrze_rsvp_admin.ajaxurl;function i(r,o){var e=o.attr("data-id"),i=o.attr("href");jQuery.ajax({type:"POST",url:a,data:{action:"booking_action",id:e,type:r}}).fail(function(e){console.error("AJAX request failed")}).done(function(e){e=JSON.parse(e),jQuery.ajax({type:"GET",url:i}).fail(function(e){console.error("AJAX request failed")}).done(function(e){"confirm"==r?o.addClass("rrze-rsvp-confirmed").attr("disabled","disabled").html(n):o.attr("disabled","disabled").html(t)})})}o(".rrze-rsvp-confirm").click(function(e){return e.preventDefault(),i("confirm",jQuery(this)),!1}),o(".rrze-rsvp-cancel").click(function(e){return e.preventDefault(),confirm(r)&&i("cancel",jQuery(this)),!1}),o("select#rrze-rsvp-room-bookingmode").after('<a><span class="dashicons dashicons-editor-help info-bookingmode" title="Informationen zum Buchungsmodus anzeigen" aria-hidden="true"></span><span class="screen-reader-text">Informationen zum Buchungsmodus anzeigen</span></a>'),o(".cmb2-id-rrze-rsvp-room-bookingmode .cmb2-metabox-description").hide(),o(".cmb2-id-rrze-rsvp-room-bookingmode").find(".info-bookingmode").click(function(){o(".cmb2-id-rrze-rsvp-room-bookingmode .cmb2-metabox-description").slideToggle()});var e=o("body.wp-admin.post-type-room #rrze-rsvp-room-timeslots_repeat div.cmb-repeatable-grouping");o(e).each(function(e){1==o(this).find("input[id$='rrze-rsvp-room-starttime']").prop("disabled")&&o(this).find("button.cmb-remove-group-row").prop({disabled:!0})}),o("body.wp-admin.post-type-room form, body.wp-admin.post-type-booking form").submit(function(e){o("#postbox-container-2 :disabled").each(function(e){o(this).removeAttr("disabled")})});var s=jQuery("div#rrze-rsvp-booking-details"),d=s.find("select#rrze-rsvp-booking-seat"),c=s.find("input#rrze-rsvp-booking-start_date"),l=s.find("input#rrze-rsvp-booking-start_time"),m=s.find("input#rrze-rsvp-booking-end_date"),p=s.find("input#rrze-rsvp-booking-end_time");l.attr("disabled","disabled"),d.change(function(){c.val(""),l.val(""),m.val(""),p.val(""),jQuery("div.select_timeslot_container").remove()}),c.change(function(){m.val(c.val()),l.val(""),p.val(""),""==d.val()||""==c.val()?(alert(rrze_rsvp_admin.alert_no_seat_date),c.val(""),m.val("")):(jQuery("div.select_timeslot_container").remove(),jQuery.post(a,{action:"ShowTimeslots",seat:d.val(),date:c.val()},function(e){0!=e&&jQuery("input#rrze-rsvp-booking-start_time").after(e)}))}),o("div.cmb2-id-rrze-rsvp-booking-start").on("change","select.select_timeslot",function(){var e=jQuery(this).val(),r=jQuery(this).find(":selected").data("end");l.val(e),p.val(r)});var v=o("select#rrze-rsvp-room-bookingmode"),u=v.val(),b=o("div.cmb2-id-rrze-rsvp-room-instant-check-in"),f=o("input#rrze-rsvp-room-auto-confirmation"),h=f.is(":checked");function _(e){o("div#cmb2-metabox-rrze_rsvp_general-meta div.cmb-row.hide-"+e).slideUp(),o("div#cmb2-metabox-rrze_rsvp_general-meta div.cmb-row").not(".hide-"+e).slideDown(),o("div#cmb2-metabox-rrze_rsvp_general-meta div.cmb-row.hide-"+e+" input").prop("checked",!1),"check-only"===e&&o("input#rrze-rsvp-room-instant-check-in").prop("checked",!0)}function z(e){var r;!0===e?"reservation"!==(r=o("option:selected",v).val())&&"check-only"!==r||b.slideDown():(b.slideUp(),o("#rrze-rsvp-room-instant-check-in").prop("checked",!1))}_(u),z(h),v.on("change",function(){_(o("option:selected",this).val())}),f.click(function(){z(o(this).is(":checked"))})});